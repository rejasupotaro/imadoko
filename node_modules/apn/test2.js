/**
 * Created with JetBrains WebStorm.
 * Date: 05/07/12
 * Time: 09:23
 * To change this template use File | Settings | File Templates.
 */

var apns = require('./index');

var options = {
    cert: 'airlinks-dev-cert.pem',
    key:  'airlinks-dev.pem',
//    passphrase: 'beatblaster123',
    gateway: 'gateway.sandbox.push.apple.com',
    port: 2195,
    enhanced: true,
    errorCallback: false,
    cacheLength: 100
};

var apnsConnection = new apns.Connection(options);

var token = 'c9a6324f9a0308878225f5cb09934e079664afe4deef6ef58a3786a909473aba';

var myDevice = new apns.Device(token);

var note = new apns.Notification();

note.expiry = Math.floor(Date.now() / 1000) + 3600; // Expires 1 hour from now.
note.badge = 3;
note.sound = "ping.aiff";
note.alert = "You have a new message";
note.payload = {'messageFrom': 'Caroline'};
note.device = myDevice;

apnsConnection.sendNotification(note);